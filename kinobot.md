# Техническое задание: Telegram-бот для поиска фильмов

## Описание:
Создание Telegram-бота, который позволяет пользователям искать информацию о фильмах. Бот получает запросы от пользователей, отправляет их на внешний API для получения данных о фильмах и возвращает пользователю информацию в виде текстового сообщения или изображения с кратким описанием фильма. Бот также ограничивает количество сообщений, которые пользователь может отправить за день, для предотвращения спама.

## Требования:

### 1. Аутентификация и ключи:
- Используется API-ключ для подключения к Telegram через переменную окружения `BOT_KEY`.
- Используется API-ключ для получения данных о фильмах через переменную окружения `API_KEY`.

### 2. Функционал:
- Обработка команды `/start` для приветствия пользователя и предоставления инструкций.
- Обработка текстовых сообщений от пользователя, отправка запроса к внешнему API для получения данных о фильме.
- Ограничение на количество сообщений в день, которые может отправить пользователь (максимум 20 сообщений за 24 часа).

### 3. Компоненты:
#### API взаимодействие:
- Запросы к внешнему API для получения данных о фильмах.
- Ответ содержит информацию о типе фильма (фильм, сериал, мультфильм и т.д.), его названии, году выпуска, жанре, рейтингах (IMDb, КП), возрастных ограничениях, стране производства, длительности и описании.
- Отправка пользователю постера фильма и ссылки на фильм на Kinopoisk.
- Обработка ошибок, таких как отсутствие данных о фильме или превышение лимита запросов к API.

#### Ограничение запросов (limiter):
- Каждый пользователь может отправить до 20 сообщений за 24 часа.
- Сброс счётчика сообщений для каждого пользователя происходит каждые 24 часа.

### 4. Сообщения:
- Информирование пользователя о превышении лимита запросов с соответствующим предупреждением.
- В случае ошибки при получении данных от API — отправка сообщения об ошибке пользователю.

### 5. Ограничения и обработка ошибок:
- Если лимит API на день исчерпан, бот должен уведомить пользователя о необходимости вернуться на следующий день.
- Если фильм не найден или произошла ошибка с API, бот должен отправить соответствующее сообщение об ошибке.

### 6. Тестирование:
- Написание юнит-тестов для проверки логики обработки запросов и лимита сообщений.
- Тестирование взаимодействия с API (в том числе проверка корректности ответа и обработки ошибок).
- Тестирование ограничения на количество сообщений от пользователя.

### 7. Упаковка и развертывание:
- Проект должен быть упакован в Docker-контейнер.
- Для развертывания используется `docker-compose`.
- Dockerfile должен включать сборку и запуск бота.
- Приложение должно быть легко разворачиваемым на любом сервере с использованием Docker.

## Критерии оценивания
Максимум - 15 баллов (при условии выполнения обязательных требований):

- Реализован алгоритм обработки запросов и получения данных от API — 2 балла.
- Реализовано разделение на слои (API взаимодействие, обработка запросов, ограничение на количество сообщений) — 2 балла.
- Реализовано API взаимодействие с внешним сервисом (получение данных о фильмах) — 2 балла.
- Реализован интерфейс для взаимодействия с пользователем через Telegram — 2 балла.
- Написаны юнит-тесты — 1 балл.
- Написаны интеграционные тесты для проверки взаимодействия с API — 2 балла.
- Тесты адекватны и полностью покрывают функциональность бота — 1 балл.
- Понятность и чистота кода — до 3 баллов.

**Зачёт от 10 баллов**
